<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<title></title>
<meta name='keywords' content='' />
<meta name='description' content=""/>
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
<audio id="music" src="music.mp3" loop autoplay></audio>
<div class="Symbol hero"></div>
<div class="View stage" id="J_stage">
    <div class="View scene">
        <div class="Widget mountain-s"></div>
        <div class="Widget year">
            <span class="char Animate year"></span>
            <span class="char Animate year"></span>
            <span class="char Animate year"></span>
            <span class="char Animate year"></span>
        </div>

        <div class="Widget dirc"></div>
        <div class="Widget mountain-d" style="margin-left:240px"></div>
    </div>
    <div class="View scene">
        <div class="Widget cloud e Animate"></div>
        <div class="Widget heading"></div>
        <div class="Widget service">
            <div class="block"></div>
            <div class="block"></div>
            <div class="block"></div>
        </div>
        <div class="Widget mountain"></div>
        <div class="Widget cloud c Animate"></div>
    </div>
    <div class="View scene">
        <div class="Widget heading heading-2"></div>
        <div class="Widget chart Animate">
        </div>
    </div>
    <div class="View scene">
        <div class="Widget cloud d Animate"></div>
        <div class="Widget logo4399" id="logo"></div>
        <div class="Widget tort Animate flag" id="tort"></div>
        <div class="Widget heading heading-3"></div>
        <div class="Widget type Animate">
        </div>
        <div class="Widget mountain" style="margin-left:380px"></div>
        <div class="Widget pipe" style="margin-left:300px;"></div>
    </div>
    <div class="View scene">
        <div class="Widget heading heading-4"></div>
        <div class="Widget cloud b Animate" style="margin-top:100px"></div>
        <div class="Widget cloud c Animate"></div>
        <div class="Widget bricks" id="callman">
            <div class="brick1"></div>
            <div class="brick2" id="score1">
                <div class="memb">
                    <div class="girl girl-a" id="memb1"></div>
                </div>
            </div>
            <div class="brick1"></div>
            <div class="brick2" id="score2">
                <div class="memb">
                    <div class="girl girl-b" id="memb2"></div>
                </div>
            </div>
            <div class="brick1"></div>
            <div class="brick2" id="score3">
                <div class="memb">
                    <div class="girl girl-c" id="memb3"></div>
                </div>
            </div>
        </div>
        <div class="Widget zhalan" style="margin-left:0"></div>
        <div class="Widget mountain-s" style="left:auto;right:0"></div>
    </div>
    <div class="View scene">
        <div class="Widget data">
            <div class="databox">
                <h2 class="title">今年总共完成界面</h2>
                <p class="text">295<span>个</span></p>
            </div>
            <div class="databox">
                <h2 class="title">共完成广告图</h2>
                <p class="text">347<span>张</span></p>
            </div>
        </div>
        <div class="Widget pipe"></div>
    </div>
    <div class="View scene">
        <div class="Widget data">
            <div class="databox">
                <h2 class="title">累计完成任务</h2>
                <p class="text">324<span>个</span></p>
            </div>
            <div class="databox">
                <h2 class="title">累积耗时</h2>
                <p class="text">3241<span>小时</span></p>
            </div>
        </div>
        <div class="Widget zhalan" style="margin-left:-100px"></div>
    </div>
    <div class="View scene">
        <div class="Widget mountain" style="left:-200px"></div>
        <div class="Module jump"></div>
        <div class="Widget steps steps-a">
            <div class="block"></div>
            <div class="block"></div>
            <div class="block"></div>
        </div>
        <div class="Widget data">
            <div class="databox">
                <h2 class="title">参与数最高的三个活动</h2>
                <ul class="list">
                    <li><span>1</span>公主王子的梦想学院</li>
                    <li><span>2</span>帝王降临 铠甲勇士捕王国庆活动</li>
                    <li><span>3</span>赛尔号暑期签到抽抽乐</li>
                </ul>
            </div>
        </div>
        <div class="Widget cloud a Animate"></div>
    </div>
    <div class="View scene">
        <div class="Widget data">
            <div class="databox">
                <h2 class="title">三站大事件</h2>
                <ul class="list">
                    <li><span>1</span>动漫站 所有子频道建立wap版</li>
                    <li><span>2</span>儿歌站 全年总pv达到9亿5809万</li>
                    <li><span>3</span>玩具网 上线半年累积用户212w</li>
                </ul>
            </div>
        </div>
        <div class="Widget cloud a Animate"></div>
    </div>
    <div class="View scene">
        <ul class="Widget steps steps-b">
            <li>
                <div class="block"></div>
            </li>
            <li>
                <div class="block"></div>
                <div class="block"></div>
            </li>
            <li>
                <div class="block"></div>
                <div class="block"></div>
                <div class="block"></div>
            </li>
            <li>
                <div class="block"><div class="trig" id="stepFour"></div></div>
                <div class="block"><div class="trig" id="stepThree"></div></div>
                <div class="block"><div class="trig" id="stepTwo"></div></div>
                <div class="block"><div class="trig" id="stepOne"></div></div>
                <div class="trig triglast" id="stepFive"></div>
            </li>
        </ul>
        <div class="Widget flagstaff" id="flagstaff">
            <div class="flag" id="flag"></div>
        </div>
        <div class="Widget cloud e Animate" style="margin-left:-200px"></div>
    </div>
    <div class="View scene" style="width:50%">
        <div class="Widget zhalan" id="zhalan" style="margin-left:50px"></div>
        <div class="Widget slogan">
            <p class="title">「今年先定一个小目标」</p>
            <p class="text">“成为望海路最好的设计小组”</p>
        </div>
        <div class="Widget bird" id="bird"></div>
        <div class="Widget dance Animate">
        </div>
    </div>
    <div class="View scene" style="width:50%">
        <p class="Text saying" id="saying"><span class="b">2017</span>，从 心 出 发</p>
        <div class="Widget castle" id="castle">
            <div class="gohome" id="gohome"></div>
            <div class="flag Animate" id="castleFlag"></div>
            <div class="fire fire-a"></div>
            <div class="fire fire-b"></div>
            <div class="fire fire-c"></div>
        </div>
    </div>
    <div class="Module road" style="width:1125%"></div>
    <div class="View hero">
        <div class="Sprite hero Animate walk" id="hero"></div>
    </div>
</div>
<script src="js/jquery.min.js"></script>
<script src="js/highlight.pack.js"></script>
<script src="js/TweenMax.min.js"></script>
<script src="js/velocity.min.js"></script>
<script src="js/ScrollMagic.js"></script>
<script src="js/animation.velocity.js"></script>
<script src="js/animation.gsap.js"></script>
<script src="js/debug.addIndicators.js"></script>
<script src="js/horwheel.min.js"></script>
<script>
$(function(){
    $("#music")[0].volume = 0.4;
    var Pixel = function(){};
    Pixel.prototype = {
        init : function(){
            this.render();
            this.events();
            this.animate();
        },
        render : function(){
            var wrapper = document.querySelector('body');
            horwheel(wrapper);
        },
        events : function(){
            var timer;
            $(window).bind('scroll',function(e){
                clearTimeout(timer);
                timer = setTimeout(function(){
                    $("#hero").removeClass('run').addClass('walk');
                },300);
                if(document.body.scrollLeft > 0){
                    $("#hero").removeClass('walk').addClass('run');
                }else{
                    $("#hero").removeClass('run').addClass('walk');
                }
            });
            // $(window).bind('keydown',function(e){
            //     if(e.keyCode == 40){
            //         var l = document.body.scrollLeft;
            //         l=l+20;
            //         $("html,body").stop().animate({'scrollLeft':l},100);
            //     }
            //     console.log(e.keyCode);
            // })
        },
        animate : function(){
            var controller = new ScrollMagic.Controller({vertical: false});
        	// build tween
        	var jump = TweenMax.to("#hero", 0.5, { top: "-=104",repeat:5,yoyo:true});
        	// build scene
        	new ScrollMagic.Scene({triggerElement: "#callman", duration: 620})
        		.setTween(jump)
        		.addTo(controller);
            var score1 = TweenMax.to("#score1", 0.5, { top: "-=20",repeat:1,yoyo:true});
            var score2 = TweenMax.to("#score2", 0.5, { top: "-=20",repeat:1,yoyo:true});
            var score3 = TweenMax.to("#score3", 0.5, { top: "-=20",repeat:1,yoyo:true});

            new ScrollMagic.Scene({triggerElement: "#score1", duration: 100,offset:20})
        		.setTween(score1)
        		.addTo(controller);
            new ScrollMagic.Scene({triggerElement: "#score2", duration: 100,offset:10})
        		.setTween(score2)
        		.addTo(controller);
            new ScrollMagic.Scene({triggerElement: "#score3", duration: 100,offset:10})
        		.setTween(score3)
        		.addTo(controller);

            var memb1 = TweenMax.to("#memb1", 0.5, { top: "-=82"});
            var memb2 = TweenMax.to("#memb2", 0.5, { top: "-=82"});
            var memb3 = TweenMax.to("#memb3", 0.5, { top: "-=82"});

            new ScrollMagic.Scene({triggerElement: "#score1", duration: 100,offset:10})
        		.setTween(memb1)
        		.addTo(controller);
            new ScrollMagic.Scene({triggerElement: "#score2", duration: 100,offset:10})
        		.setTween(memb2)
        		.addTo(controller);
            new ScrollMagic.Scene({triggerElement: "#score3", duration: 100,offset:10})
        		.setTween(memb3)
        		.addTo(controller);

            var tort = TweenMax.to("#tort", 0.5, { left :"+=460"});
            new ScrollMagic.Scene({triggerElement: "#logo", duration: 1600,offset:-500})
        		.setTween(tort)
        		.addTo(controller);
            var tortJump = TweenMax.to("#hero", 0.5, { top: "-=104",repeat:1,yoyo:true});
            new ScrollMagic.Scene({triggerElement: "#logo", duration: 280,offset:450})
        		.setTween(tortJump)
        		.addTo(controller);

            var stepOne = TweenMax.to("#hero", 0.5, { top: "-=58"});
            var stepTwo = TweenMax.to("#hero", 0.5, { top: "-=58"});
            var stepThree = TweenMax.to("#hero", 0.5, { top: "-=58"});
            var stepFour = TweenMax.to("#hero", 0.5, { top: "-=58"});
            var stepFive = TweenMax.to("#hero", 0.5, { top: "-=150"});
            new ScrollMagic.Scene({triggerElement: "#stepOne", duration: 50})
        		.setTween(stepOne)
        		.addTo(controller);
            new ScrollMagic.Scene({triggerElement: "#stepTwo", duration: 50,offset:10})
        		.setTween(stepTwo)
        		.addTo(controller);
            new ScrollMagic.Scene({triggerElement: "#stepThree", duration: 50,offset:10})
        		.setTween(stepThree)
        		.addTo(controller);
            new ScrollMagic.Scene({triggerElement: "#stepFour", duration: 50,offset:10})
        		.setTween(stepFour)
        		.addTo(controller);
            new ScrollMagic.Scene({triggerElement: "#stepFive", duration: 200})
        		.setTween(stepFive)
        		.addTo(controller);

            var flagDownHero = TweenMax.to("#hero", 0.5, { top: "+=382",left :"-=190"});
            var flagDown = TweenMax.to("#flag", 0.5, { top: "+=360"});

            new ScrollMagic.Scene({triggerElement: "#flagstaff", duration: 300,offset:20})
        		.setTween(flagDownHero)
        		.addTo(controller);
            new ScrollMagic.Scene({triggerElement: "#flagstaff", duration: 420,offset:20})
        		.setTween(flagDown)
        		.addTo(controller);

            var heroGoHome = TweenMax.to("#hero", 0.5, { left :"+=190"});
            new ScrollMagic.Scene({triggerElement: "#gohome", duration: 400})
        		.setTween(heroGoHome)
        		.addTo(controller);

            new ScrollMagic.Scene({triggerElement: "#castle",offset:140})
        		.setVelocity("#hero", {opacity: 0}, {duration: 600})
        		.addTo(controller);

            new ScrollMagic.Scene({triggerElement: "#castleFlag",offset:30})
				.setClassToggle("#castle", "Animate")
                .addTo(controller);

            var saying = TweenMax.to("#saying", 0.5, { top :"-=20",opacity:1});
            new ScrollMagic.Scene({triggerElement: "#castle", duration: 200})
                .setTween(saying)
                .addTo(controller);

        }
    }
    var pixel = new Pixel();
    pixel.init();
});
</script>
</body>
</html>
